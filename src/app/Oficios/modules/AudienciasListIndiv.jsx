'use client'
import { nameTranslateActuario } from '@/utils/traductorNombres'
import styles from '../Oficios.module.css'
import { oficioState } from '@/utils/oficioState'
import { useContext, useEffect, useState } from 'react'
import { DataContext } from '@/context New/DataContext'

const SVGs = {
    'vacio': (
        <svg viewBox="0 0 24 24" fill="none">
        <path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005" stroke='#fff' strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
    ),'finalizado':(
        <svg viewBox="0 0 24 24" fill="none">
        <path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005M12 11V17M12 11L14 13M12 11L10 13" stroke='#17a2b8' strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
    ),'nocontrolado':(
        <svg viewBox="0 0 24 24" fill="none">
        <path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005M9 14H15" stroke='#ffc107' strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
    ),'error':(
        <svg viewBox="0 0 24 24" fill="none">
            <path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005M10 12L14 16M14 12L10 16" stroke='#dc3545' strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
    ),'controlado':(
        <svg viewBox="0 0 24 24" fill="none">
        <path d="M8 5.00005C7.01165 5.00082 6.49359 5.01338 6.09202 5.21799C5.71569 5.40973 5.40973 5.71569 5.21799 6.09202C5 6.51984 5 7.07989 5 8.2V17.8C5 18.9201 5 19.4802 5.21799 19.908C5.40973 20.2843 5.71569 20.5903 6.09202 20.782C6.51984 21 7.07989 21 8.2 21H15.8C16.9201 21 17.4802 21 17.908 20.782C18.2843 20.5903 18.5903 20.2843 18.782 19.908C19 19.4802 19 18.9201 19 17.8V8.2C19 7.07989 19 6.51984 18.782 6.09202C18.5903 5.71569 18.2843 5.40973 17.908 5.21799C17.5064 5.01338 16.9884 5.00082 16 5.00005M8 5.00005V7H16V5.00005M8 5.00005V4.70711C8 4.25435 8.17986 3.82014 8.5 3.5C8.82014 3.17986 9.25435 3 9.70711 3H14.2929C14.7456 3 15.1799 3.17986 15.5 3.5C15.8201 3.82014 16 4.25435 16 4.70711V5.00005M16 11H14M16 16H14M8 11L9 12L11 10M8 16L9 17L11 15" stroke='#28a745' strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>
        </svg>
    )
    
}
export default function AudienciasListIndiv({item, audFunction, dateToUse}) {
    const [actuario, setActuario] = useState(nameTranslateActuario(item.actuario) || '');
    const {desplegables, updateData, updateDesplegables} = useContext(DataContext);
    const handleChange = (value) =>{
        setActuario(value)
        updateData(dateToUse, item.id, 'actuario', value);
    }
    useEffect(() => {
        updateDesplegables()
    }, []);
    return (
        <div onClick={()=> (item.estado==='FINALIZADA' || item.estado==='RESUELVO') && audFunction(item)} className={`${styles.audienciasListIndivBlock}`} title={oficioState(item)}>
            <div className={styles.block1}>
                {SVGs[oficioState(item)]}
            </div>
            <div className={styles.block2}>
                <span className={styles.legajoActuarioSpan}><p className={styles.legajoTitle}>{item.numeroLeg}</p>
                {item.actuario && <select className={styles.actuarioName} onChange={(e)=>{handleChange(e.target.value)}} value={actuario}>
                    <option>{nameTranslateActuario(item.actuario)}</option>
                    <option value={''}></option>
                    {desplegables.actuario && desplegables.actuario.map(el => {
                        return <option key={el} value={el}>{nameTranslateActuario(el)}</option>
                    })}
                </select>}</span>
                <p className={styles.tipoTitle}>{item.tipo}</p>
                <p className={styles.juezTitle}>{item.juez && item.juez.split(' ').splice(1,1)} {item.juez && item.juez.split(' ').splice(2,2).join(' ')}</p>
            </div>
        </div>
    )
}